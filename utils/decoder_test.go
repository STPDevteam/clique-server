package utils

import (
	"fmt"
	"regexp"
	"testing"
)

func TestDecodeDistribution(t *testing.T) {
	var input = "0xacdd39b600000000000000000000000000000000000000000000000000000000000000c0000000000000000000000000000000000000000000000000000000000000010000000000000000000000000000000000000000000000000000000000000001400000000000000000000000000000000000000000000000000000000000000012000000000000000000000000000000000001ed09bead87c0378d8e640000000000000000000000000000000000000000000000000000000000000000000001a00000000000000000000000000000000000000000000000000000000000000002747400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000027474000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000003a687474703a2f2f64657661706976322e6d79636c697175652e696f2f7374617469632f313636353437333831353439343238353532382e706e67000000000000000000000000000000000000000000000000000000000000000000000000000500000000000000000000000018041866663b077bb6bf2baffaea2451a2472ed7000000000000000000000000000000000000629b8c891b267182b6140000000000000000000000000000000000000000000000000000000000000000634441800000000000000000000000005718d9c95d15a766e9dde6579d7b93eaa88a26b8000000000000000000000000000000000000629b8c891b267182b61400000000000000000000000000000000000000000000000000000000000000006344418000000000000000000000000055cb10cc3ae459eee072567c8d53d1bca31761fa000000000000000000000000000000000000629b8c891b267182b61400000000000000000000000000000000000000000000000000000000000000006344418000000000000000000000000033ff77434b23781111fe6d6609f47c019e227f91000000000000000000000000000000000000629b8c891b267182b6140000000000000000000000000000000000000000000000000000000000000000634441800000000000000000000000001a33c523d247cc3b2b3d2b51302463de9554f159000000000000000000000000000000000000629b8c891b267182b614000000000000000000000000000000000000000000000000000000000000000063444180"

	data, err := DecodeDistribution(input)
	if err != nil {
		println(err)
	} else {
		fmt.Println(data[0])
	}
}

func TestDecode(t *testing.T) {

	//0000000000000000000000000000000000000000000000000000000000000000
	//0000000000000000000000005718d9c95d15a766e9dde6579d7b93eaa88a26b8
	//0000000000000000000000000000000000000000000000000000000000000100
	//0000000000000000000000000000000000000000000000000000000000000140
	//0000000000000000000000000000000000000000000000000000000000000160
	//00000000000000000000000000000000000000000000000000000000630f8580
	//0000000000000000000000000000000000000000000000000000000063137a00
	//0000000000000000000000000000000000000000000000000000000000000002
	//0000000000000000000000000000000000000000000000000000000000000007
	//6d756c2074776f00000000000000000000000000000000000000000000000000
	//0000000000000000000000000000000000000000000000000000000000000000
	//0000000000000000000000000000000000000000000000000000000000000000

	//0000000000000000000000000000000000000000000000000000000000000020000000000000000000000000000000000000000000000000000000000000000b0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000a1d0798b05b294d016e349511fbfc12a5e6e9cc9000000000000000000000000000000000000000000000000000000000000018000000000000000000000000000000000000000000000000000000000000002000000000000000000000000000000000000000000000000000000000063449b8200000000000000000000000000000000000000000000000000000000634dd6280000000000000000000000000000000000000000000000000de0b6b3a764000000000000000000000000000000000000000000000000021e19e0c9bab240000000000000000000000000000000000000000000000000003635c9adc5dea0000000000000000000000000000000000000000000000000000000000000000000010000000000000000000000000000000000000000000000000000000000000280000000000000000000000000000000000000000000000000000000000000004353686f756c642077652068617665206120746f75726e616d656e742077686963682077696c6c2068617665207072697a657320666f7220746f7020706c61636572733f000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000495b6d61726b646f776e5d57652063616e2068617665206120636f6d706574697469766520656e7669726f6e6d656e7420616e64206275696c642074686520636f6d6d756e6974792e2000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000

	var input = "0x0000000000000000000000000000000000000000000000000000000000000020000000000000000000000000000000000000000000000000000000000000000b0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000a1d0798b05b294d016e349511fbfc12a5e6e9cc9000000000000000000000000000000000000000000000000000000000000018000000000000000000000000000000000000000000000000000000000000002000000000000000000000000000000000000000000000000000000000063449b8200000000000000000000000000000000000000000000000000000000634dd6280000000000000000000000000000000000000000000000000de0b6b3a764000000000000000000000000000000000000000000000000021e19e0c9bab240000000000000000000000000000000000000000000000000003635c9adc5dea0000000000000000000000000000000000000000000000000000000000000000000010000000000000000000000000000000000000000000000000000000000000280000000000000000000000000000000000000000000000000000000000000004353686f756c642077652068617665206120746f75726e616d656e742077686963682077696c6c2068617665207072697a657320666f7220746f7020706c61636572733f000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000495b6d61726b646f776e5d57652063616e2068617665206120636f6d706574697469766520656e7669726f6e6d656e7420616e64206275696c642074686520636f6d6d756e6974792e2000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000"
	input = input[66:]
	var outputParameters []string
	outputParameters = append(outputParameters, "uint256")
	outputParameters = append(outputParameters, "uint256")
	outputParameters = append(outputParameters, "address")
	outputParameters = append(outputParameters, "string")
	outputParameters = append(outputParameters, "string")

	data, err := Decode(outputParameters, input)
	if err != nil {
		println(err)
	} else {
		fmt.Println(data[0])
	}
}

/*
0000000000000000000000000000000000000000000000000000000000000120
0000000000000000000000000000000000000000000000000000000000000160
00000000000000000000000000000000000000000000000000000000000001a0
00000000000000000000000000000000000000000000000000000000000001e0
0000000000000000000000000000000000000000000000000000000000000220
0000000000000000000000000000000000000000000000000000000000000240
0000000000000000000000000000000000000000000000000000000000000260
0000000000000000000000000000000000000000000000000000000000000280
00000000000000000000000000000000000000000000000000000000000002e0
0000000000000000000000000000000000000000000000000000000000000007
426561727437c800000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000008
6265617272727272000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000003
4e46540000000000000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000000000000000000a
62656172d37437c8cdd200000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000000000000000003b
68747470733a2f2f64657661706976322e6d79636c697175652e696f2f7374617469632f913797d7523746909172849236943597d55335be0184e800000000000000000000000000000000000000000000000000000000000000000000000000
*/
func Test1(t *testing.T) {
	re, _ := regexp.Compile("^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+.[a-zA-Z]{2,}$")
	if !re.MatchString("ads@qq.m") {
		println("no")
		return
	}
	println("yes")
}
